#-------Project1--------------------------------------------#
Syf: dacj.vbe \
	 dacm.vbe \
	 daco.vbe \
	 dacr.vbe \
	 daca.vbe  
		@echo "<-- Generated SYF"

Boom: dacj_b.vbe \
	  dacm_b.vbe \
	  daco_b.vbe \
	  dacr_b.vbe \
	  daca_b.vbe  
	 	@echo "<-- Generated BOOM"

Boog: dacj_b.vst \
	  dacm_b.vst \
	  daco_b.vst \
	  dacr_b.vst \
	  daca_b.vst 
	 	@echo "<-- Generated BOOG"

Loon: dacj_b_l.vst \
	  dacm_b_l.vst \
	  daco_b_l.vst \
	  dacr_b_l.vst \
	  daca_b_l.vst 
		@echo "<-- Generated LOON"

flatbeh: daca_b_l_net.vbe
		@echo "<-- Generated FLATBEH and PROOF"		
		
dft: daca_dft.vst
		@echo "<-- Generated DFT"	
		

#-------Finite State Machine Synthesis-----------------#

vhd_to_fsm:
	rename .vhd .fsm *.vhd

daca.vbe: dac.fsm
	@echo "    Encoding Synthesis -> daca.vbe"
	syf -CEV -a dac
 
dacj.vbe: dac.fsm
	@echo "    Encoding Synthesis  -> dacj.vbe"
	syf -CEV -j dac
 
dacm.vbe: dac.fsm
	@echo "    Encoding Synthesis  -> dacm.vbe"
	syf -CEV -m dac
 
daco.vbe: dac.fsm
	@echo "    Encoding Synthesis  -> daco.vbe"
	syf -CEV -o dac
 
dacr.vbe: dac.fsm
	@echo "    Encoding Synthesis  -> dacr.vbe"
	syf -CEV -r dac

%_b.vbe: %.vbe
	@echo "    Boolean Optimization  -> $@"
	boom -V -d 50 $* $*_b>$*_boom.out 
	
%.vst: %.vbe paramfile.lax
	@echo "    Logical Synthesis  -> $@"
	boog -x 1 -l paramfile $*>$*_boog.out 
	
%_l.vst: %.vbe paramfile.lax
	@echo "    Netlist Optimization  -> $@"
	loon -x 1 -l paramfile $* $*_l > $*_loon.out 
	
%_b_l_net.vbe: %_b_l.vst %.vbe
	@echo "    Formal checking  -> $@"
	flatbeh $*_b_l $*_b_l_net > $*_flatbeh.out 
	proof -d $* $*_b_l_net > $*_proof.out
	
daca_dft.vst : daca_b_l.vst  daca_dft.vst
	@echo "    DFT  -> $@"
	scapin -VRB daca_b_l path daca_dft> daca_DFT.out
	
#-------Clean Up---------------------------------------#

clean :
	rm -f  *.vbe *.enc *~
	@echo "Erase all the files generated by the makefile"

